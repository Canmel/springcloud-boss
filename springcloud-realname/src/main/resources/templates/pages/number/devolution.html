<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi"/>
    <link rel="stylesheet" href="../../css/font.css">
    <link rel="stylesheet" href="../../css/xadmin.css">
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../js/vue.js"></script>
    <script type="text/javascript" src="../../js/ajax-util.js"></script>
    <script type="text/javascript" src="../../js/xadmin.js"></script>

</head>
<body>
<div class="x-body">
    <blockquote class="layui-elem-quote">外呼号码授权</blockquote>
    <fieldset class="layui-elem-field">
        <legend>号码授权</legend>
        <div class="layui-field-box">
            <table class="layui-table">
                <thead>
                <tr>
                    <th>序号</th>
                    <th>申请时间</th>
                    <th>外呼号码</th>
                    <th>服务商</th>
                    <th>号码是否可用</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="(item,index) in telList.list">
                    <td>{{(telList.pageNum - 1) * 10 + index + 1}}</td>
                    <td>{{item.applyTime}}</td>
                    <td>{{item.tel}}</td>
                    <td>
                        <span v-for="uname in item.partner">{{uname.username}},</span>
                    </td>
                    <td class="td-status">
                        <span class="layui-btn layui-btn-normal layui-btn-mini">{{item.status.name}}</span>
                    </td>
                    <td>
                        <button class="layui-btn" @click="auth(item.id);">授权</button>
                        <a href="http://www.layui.com" class="layui-btn">撤回</a>

                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </fieldset>
</div>
</body>

<script>

    new Vue({
        el: '.x-body',
        data: {
            pageInfo: {
                pageNum:1,
                pageSize:10,
            },
            telList:[],
        },
        created: function () {
            this.getList();
        },
        methods: {
            getList(){
                let that = this;
                AJAX.GET_SYNC("applyNumber/accreditList",that.pageInfo,function (res){
                    that.telList = res.data;
                })
            },
            auth(id){
                x_admin_show('选择供应商','./service_provider.html',id,800,600);
                this.getList();
            }

        }
    });

</script>
</html>
