<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">

    <title> 智慧调查- 主页</title>

    <meta name="keywords" content="">
    <meta name="description" content="">

    <!--[if lt IE 9]>
    <meta http-equiv="refresh" content="0;ie.html"/>
    <![endif]-->

    <!--<link rel="shortcut icon" href="img/favicon.ico">-->
    <link rel="stylesheet" href="css/BeAlert.css">
    <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/plugins/jqgrid/ui.jqgrid.css?0820" rel="stylesheet">
    <link href="css/plugins/toastr/toastr.min.css" rel="stylesheet">
    <link href="css/plugins/summernote/summernote.css" rel="stylesheet">
    <link href="css/plugins/summernote/summernote-bs3.css" rel="stylesheet">
    <link href="css/plugins/webuploader/webuploader.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/demo/webuploader-demo.css">
    <link href="css/plugins/steps/jquery.steps.css" rel="stylesheet">
    <link href="css/style.css?v=4.1.0" rel="stylesheet">
    <!--<link href="css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet">-->
</head>

<body class="fixed-sidebar full-height-layout gray-bg" style="overflow:hidden">
<div class="my-loading" style="display: none">
    <div class="sk-spinner sk-spinner-wave" style="margin-top: 30%;">
        <div class="sk-rect1"></div>
        <div class="sk-rect2"></div>
        <div class="sk-rect3"></div>
        <div class="sk-rect4"></div>
        <div class="sk-rect5"></div>
    </div>
</div>
<div id="wrapper">
    <!--左侧导航开始-->
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="nav-close"><i class="fa fa-times-circle"></i>
        </div>
        <div class="sidebar-collapse">
            <ul class="nav" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <span class="clear">
                                    <span class="block m-t-xs" style="font-size:20px;">
                                        <i class="fa fa-bug"></i>
                                        <strong class="font-bold">智慧调查</strong>
                                    </span>
                                </span>
                        </a>
                    </div>
                    <div class="logo-element">调查
                    </div>
                </li>
                <li class="line dk"></li>
                <li class="hidden-folded padder m-t m-b-sm text-muted text-xs">
                </li>
                <li>
                    <a class="J_menuItem" :href="applicationContextRootPath + 'pages/home.html'"
                       data-pjax>
                        <i class="fa fa-home"></i>
                        <span class="nav-label">主页</span>
                    </a>
                </li>
                <li v-for="item in tops">
                    <a href="#">
                        <i :class="item.icon"></i>
                        <span class="nav-label">{{item.name}}</span>
                        <span class="fa arrow"></span>
                    </a>
                    <ul class="nav nav-second-level">
                        <li v-for="sub in subs">
                            <a class="J_menuItem" :href="applicationContextRootPath + sub.url" v-if="sub.parentId === item.menuId"
                               data-pjax>{{sub.name}}</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
    <!--左侧导航结束-->
    <!--右侧部分开始-->
    <div id="page-wrapper" class="gray-bg dashbard-1">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                <div class="navbar-header"><a class="navbar-minimalize minimalize-styl-2 btn btn-info " href="#"><i
                        class="fa fa-bars"></i> </a>
                    <form role="search" class="navbar-form-custom" method="post" action="search_results.html">
                        <div class="form-group">
                            <input type="text" placeholder="请输入您需要查找的内容 …" class="form-control" name="top-search"
                                   id="top-search">
                        </div>
                    </form>
                </div>
            </nav>
        </div>
        <div class="row J_mainContent page-container" id="content-main">

        </div>
    </div>
    <!--右侧部分结束-->
</div>

<!-- 全局js -->
<script src="js/jquery.min.js?v=2.1.4"></script>
<script src="js/plugins/echarts/echarts-all.js"></script>
<script src="js/jquery.pjax.js"></script>
<script src="js/BeAlert.js"></script>
<script src="js/bootstrap.min.js?v=3.3.6"></script>
<!-- Peity -->
<script src="js/plugins/peity/jquery.peity.min.js"></script>

<!-- jqGrid -->
<script src="js/plugins/jqgrid/i18n/grid.locale-cn.js?0820"></script>
<script src="js/plugins/jqgrid/jquery.jqGrid.min.js?0820"></script>
<script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="js/plugins/layer/layer.min.js"></script>
<script src="js/vue.js"></script>
<script src="js/vue-plus.js"></script>
<!-- 自定义js -->
<script src="js/hAdmin.js?v=4.1.0"></script>
<!-- 第三方插件 -->
<script src="js/plugins/pace/pace.min.js"></script>
<script src="js/ajax-util.js"></script>
<script src="js/plugins/validate/jquery.validate.min.js"></script>
<script src="js/plugins/validate/messages_zh.min.js"></script>
<script src="js/plugins/toastr/toastr.min.js"></script>
<script src="js/jquery-ui-1.10.4.min.js"></script>
<script src="js/plugins/beautifyhtml/beautifyhtml.js"></script>
<script src="js/plugins/webuploader/webuploader.min.js"></script>

<!-- Morris -->
<script src="js/plugins/morris/raphael-2.1.0.min.js"></script>
<script src="js/plugins/morris/morris.js"></script>
<!-- 自定义js -->
<script src="js/content.js?v=1.0.0"></script>
<script src="js/Sortable.js"></script>
<script src="js/jquery.json.js"></script>
<script src="js/pageination.js"></script>
<script src="js/cti/ctiClient-1.1.js"></script>
<script src="js/cti/wabacus_api.js"></script>
<script src="js/cti/wabacus_util.js"></script>
<script src="js/plugins/staps/jquery.steps.min.js"></script>

<!--<script src="js/vconsole.min.js"></script>-->
<!--<script>-->
    <!--var vConsole = new VConsole();-->
    <!--console.log('Hello world');-->
<!--</script>-->
<script src="js/jZego-rtc.js"></script>
<script src="js/common.js"></script>


<script>
    currentVue = null;
    let mediaUtil
    let pcmBuffer = []
    let speakersList = []

    $(document).pjax('[data-pjax] a, a[data-pjax]', '.page-container');
    $.jgrid.defaults.styleUI = 'Bootstrap';
    var mvm = new Vue({
        el: '#wrapper',
        data: {
            applicationContextRootPath: '/survey/',
            tops: [],
            subs: []
        },
        created: function () {
            this.loadTops();
            this.loadSuns();
        },
        methods: {
            loadTops: function() {
                let that = this;
                AJAX.GET("/system/sysMenu/tops", {}, function (resp) {
                    that.tops = resp.data;
                });
            },
            loadSuns: function() {
                let that = this;
                AJAX.GET("/system/sysMenu/subs", {}, function (resp) {
                    that.subs = resp.data;
                });
            },
            sidebarClick: function (e) {
                $('.sidebar-link').removeClass('active');
                $(e.srcElement).addClass('active');
            },
            collapseMenu: function (e) {
                if ($(e.srcElement).next().hasClass('show')) {
                    $(e.srcElement).next().removeClass('show');
                } else {
                    $(e.srcElement).next().addClass('show');
                }
            }
        }
    });
    var currentPage = sessionStorage.getItem('currentPage');
    $.pjax({
        url: currentPage ? currentPage : mvm.applicationContextRootPath + 'pages/home.html',
        container: '.page-container'
    });


    $(document).ajaxError(function (e, xhr, opt) {
        if (xhr.status == 401) {
            // location.href = 'http://' + window.location.host + '/login?redirect_url=/survey/';
        }
    });
    $(document).ajaxStart(function (XMLHttpRequest) {
        console.log(XMLHttpRequest)
    })

    $(document).on("keypress", ".search-input", function (ev) {
        if (event.keyCode == 13) {
            $(this).parent().find('button').click();
        }
    });

    $(document).on('pjax:start', function () {
    })

</script>
</body>

</html>
